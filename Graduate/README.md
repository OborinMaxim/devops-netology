## Дипломное задание по курсу «DevOps-инженер»

### Результаты

1. Инфраструктура с рекомендуемыми характеристиками создана в YandexCloud при помощи Terraform:

![alt text](img/2.JPG)

2. Настроен nginx сервер как reverse proxy. Зарегистрирован домен `maxob.ru`, настроены A-записи на внешний адрес этого сервера:

![alt text](img/1.JPG)

Для зарегистрированных доменных имен получены LetsEncrypt сертификаты.

3. Настроен кластер баз данных MySQL. 2 ноды (`db01`, `db02`) работают в режиме репликации Master/Slave:

![alt text](img/4.1.JPG)

Создаваемые на master-ноде база данных `wordpress` и пользователь `wordpress` с полными правами на эту базу, успешно реплицируются на slave-ноду:

![alt text](img/4.2.JPG)

4. Установлен WordPress. В браузере можно увидеть главную страницу по https на зарегистрированном доменном имени:

![alt text](img/5.JPG)

5. Настроена CI/CD система для автоматического развертывания приложения при изменении кода. Интерфейс Gitlab доступен по https:

![alt text](img/6.1.JPG)

Построен pipeline доставки кода в среду эксплуатации. Содержимое `.gitlab-ci.yml`:

![alt text](img/6.4.1.JPG)

При коммите и создании тега происходит отправка на виртуальную машину с приложением (`app.maxob.ru`):

![alt text](img/6.4.2.JPG)

6. Настроена система мониторинга (Prometheus, Alert Manager, Node Exporter, Grafana) для получения метрик со всей инфраструктуры. Интерфейсы Prometheus, Alert Manager и Grafana доступны по https.  
На всех серверах установлен Node Exporter и его метрики доступны Prometheus:

![alt text](img/7.4.JPG)

У Alert Manager есть набор правил для создания алертов:

![alt text](img/7.JPG)

![alt text](img/7.5.1.JPG)

В случае недоступности серверов Alert Manager выдает предупреждение:

![alt text](img/7.5.2.JPG)

В Grafana есть дашборд, отображающий метрики из Node Exporter по всем серверам:

![alt text](img/7.6.JPG)