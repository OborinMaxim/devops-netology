# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ
- Электронные чеки в json виде  
Документо-ориентированная NoSQL БД, т.к. в данном случае необходимо хранить документы в формате .json с данными в виде ключ-значение.
- Склады и автомобильные дороги для логистической компании  
Графовая NoSQL БД, т.к. данные хранятся в виде узлов (которые представляют сущности, например склады), ребер (которые определяют связи между узлами, например дороги) и свойств (дополнительная информация об узлах).
- Генеалогические деревья  
Иерархическая NoSQL БД, т.к. данные организованы в древовидную структуру и каждая дочерняя запись имеет только одного родителя.
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
NoSQL БД «ключ‑значение», т.к. в данном случае подойдет самый простой и быстрый тип хранилища данных как совокупностей пар «ключ‑значение», учитывающий время жизни данных.
- Отношения клиент-покупка для интернет-магазина  
Реляционная БД, т.к. в данном случае подойдет таблица с взаимосвязанными столбцами с данными определенного типа.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ
- Данные записываются на все узлы с задержкой до часа (асинхронная запись)  
Согласно CAP-теореме, система соответствует AP, т.к. не обеспечена согласованность данных (C), в момент времени данные могут противоречить друг другу.  
Согласно PACELC-теореме, система обладает свойством EL, т.к. при нормальной работе согласованность страдает в пользу задержки времени.
- При сетевых сбоях, система может разделиться на 2 раздельных кластера  
Согласно CAP-теореме, система соответствует CA, т.к. не обеспечена устойчивость к разделению (P), расщепление системы приведет к некорректности отклика от каждой изолированной секции.  
Согласно PACELC-теореме, система обладает свойством PA, т.к. согласованность страдает в пользу доступности при разделении.
- Система может не прислать корректный ответ или сбросить соединение  
Согласно CAP-теореме, система соответствует CP, т.к. не обеспечена доступность (A), не все запросы к системе завершаются корректным откликом.  
Согласно PACELC-теореме систему сложно классифицировать, т.к. мы не знаем ее поведение при разделении, а при нормальной работе - насколько согласованы данные и какова временная задержка. Скорее всего, система обладает свойством EC, когда при нормальной работе согласованность в приоритете перед задержкой.

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ
В одной системе BASE и ACID сочетаться не могут, т.к. BASE допускает рассогласованность данных (гарантируя лишь согласованность в конечном счете), тогда как в ACID согласованность - одно из основных требований, обеспечивающих надежность и предсказуемость.  
BASE позволяет проектировать высокопроизводительные системы, когда нужна высокая скорость обработки, а целостность данных не является критичной. ACID же позволяет проектировать высоконадежные системы, обеспечивая максимальную надежность с точки зрения данных в плане полной поддержки классических транзакций. Таким образом, при выборе между BASE и ACID учитывается контекст задачи.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ
Скорее всего, речь о Redis.  
Redis в момент работы хранит данные в оперативной памяти, поэтому он быстрый. Но в то же время, нужно иметь достаточные ее объемы для работы, и в целом следить за доступной памятью.  
Другой минус - с точки зрения безопасности. Доступ осуществляется по общему логину паролю, контроль доступа отсутствует, нет сегментации на пользователей или группы пользователей.

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---